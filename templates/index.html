<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Second Opinion</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Serif+4:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Special+Elite&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Sound toggle -->
    <button class="sound-toggle" id="soundToggle" title="Toggle typewriter sounds">
        <span class="sound-on">&#9834; Sound On</span>
        <span class="sound-off" style="display:none;">&#9834; Sound Off</span>
    </button>

    <div class="page-wrapper">
        <div class="newspaper">
            <!-- Top bar -->
            <div class="top-bar">
                <span>Est. 2025</span>
                <span>Vol. I &middot; No. 1</span>
                <span>Price: Free Advice</span>
            </div>

            <!-- Masthead -->
            <header class="masthead">
                <h1 class="masthead-title">The Second Opinion</h1>
                <p class="masthead-subtitle">Humor &amp; Heart for the Second Half</p>
            </header>

            <!-- Input state -->
            <section class="input-section" id="inputSection">
                <div class="section-rule"></div>
                <p class="section-label">Write to the Columnist</p>

                <form id="letterForm" onsubmit="return false;">
                    <div class="field-row">
                        <div class="field-group">
                            <label for="nameField">Your First Name</label>
                            <input type="text" id="nameField" class="typewriter-input" placeholder="e.g. Ralph" maxlength="50" required>
                        </div>
                        <div class="field-group">
                            <label for="locationField">Your Location</label>
                            <input type="text" id="locationField" class="typewriter-input" placeholder="e.g. Ohio" maxlength="100" required>
                        </div>
                    </div>

                    <label for="questionField">Your Question</label>
                    <textarea id="questionField" class="typewriter-textarea" placeholder="What's weighing on you? A career crossroads, a relationship question, aging parents, grown kids who won't call back, existential dread disguised as a home renovation project..." maxlength="2000" required></textarea>
                    <div class="textarea-footer">
                        <span class="char-count"><span id="charCount">0</span> / 2,000</span>
                    </div>

                    <button type="submit" class="send-btn" id="sendBtn">Send It In</button>
                </form>
            </section>

            <!-- Loading state -->
            <section class="loading-section" id="loadingSection">
                <div class="section-rule"></div>
                <p class="loading-text">Our columnist is investigating<span class="loading-dots"></span></p>
            </section>

            <!-- Response state -->
            <section class="response-section" id="responseSection">
                <div class="section-rule"></div>
                <p class="column-label">The Second Opinion &middot; Feature</p>
                <p class="byline" id="byline"></p>
                <div class="article-body" id="articleBody"></div>
                <div class="cursor" id="cursor"></div>

                <!-- Audio section -->
                <div class="audio-section" id="audioSection">
                    <div class="audio-rule"></div>
                    <p class="audio-label">Hear the column read aloud</p>
                    <button class="audio-btn" id="audioBtn">&#9654; Read It To Me</button>
                </div>

                <!-- Write another -->
                <button class="another-btn" id="anotherBtn">&#9998; Write Another Letter</button>
            </section>

            <!-- Error state -->
            <div class="error-message" id="errorMessage"></div>

            <!-- Footer -->
            <footer class="newspaper-footer">
                <div class="section-rule"></div>
                <p>A Second Draft Society Publication</p>
                <p class="disclaimer">This column is powered by AI and intended for entertainment and reflection. It is not a substitute for professional advice.</p>
            </footer>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
